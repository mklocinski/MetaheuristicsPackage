---
title: "Second stab at working group scheduling"
author: "Melissa Klocinski"
date: "2024-03-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(knitr)
library(kableExtra)
library(reticulate)
```

**Problem Type:**
Unbalanced multidimensional assignment problem

**Indices:** 

$g$ working groups, $g \in G$  
$p$ presentations, $p \in P$ 
$t$ time slots, $t \in T, T = \{1,...|S|\}$ (see below for $S$)
$a$ author sets, $a \in A$  

**Data:**  
$wg\_presentations_{p,g}$, 0-1 matrix where 1 if presentation $p$ is associated with working group $g$ else 0  
$length_{p}$, 0-1 list of presentation lengths for each $p$, where 1 indicates a 60 minute session and 0 indicating a thirty minute session  
$S_t$ list of session indices, where $s_i= [1,2,3], S = s_{1}\bigcup ...\bigcup s_i$ for $i$ sessions     


**Variables:** 

$X_{p,g,t}$, 1 if presentation $p$ is assigned to working group $g$ at time $t$ else 0 (primary decision)  
$Y_{a,p,t}$, 1 if author $a$ is scheduled for presentation $p$ at time $t$ else 0 (indicator for facilitator-specific constraints)  

**Objective Function:**

$$\begin{aligned}
\sum_{p=1}^P \sum_{g=1}^G \sum_{t=1}^T c_{p,g,t}X_{p,g,t} \\
\end{aligned}$$



**Constraints**  
\begin{equation}
\sum_{g=1}^G \sum_{t=1}^T X_{p,g,t} = 1, \space \forall p \in P \\
\end{equation}

\begin{equation}
\sum_{p=1}^P \sum_{g=1}^G \sum_{t=1}^T X_{p,g,t} \le wg\_presentations_{p,g} \\
\end{equation}

\begin{equation}
\sum_{p=1}^P \sum_{g=1}^G \sum_{t=1}^T S_{t}length_{p}X_{p,g,t} \le 2 \\
\end{equation}


\begin{equation}
\sum_{m=1}^M Y_{f,m,t} \le 1, \space \forall f \in F, t \in T  \\
\end{equation}
\begin{equation}
\sum_{m=1}^M Z_{g,m,t} \le 1, \space \forall g \in G, t \in T  \\
\end{equation}
\begin{equation}
Y_{f,m,t} \le availability_{f,t}, \space \forall m \in M, r \in R, t \in T \\
\end{equation}
\begin{equation}
room\_capacities_{r}X_{m,r,t} \ge meeting\_attendance_{m}, \space \forall m \in M, r \in R, t \in T \\
\end{equation}
\begin{equation}
empty 
\end{equation}
\begin{equation}
empty 
\end{equation}
\begin{equation}
empty 
\end{equation}
\begin{equation}
X_{m,r,t}, Y_{m,r,t}, Z_{m,r,t} \in \{0,1\}
\end{equation}

(1) All presentations must be assigned; for each presentation, there needs to be exactly one assignment to a working group and time slot.  
(2) No double-booking authors; each author can be assigned at most one time slot per presentation per working group.     
(3) Only associated working groups and presentations can be scheduled together
(4) All presentations of length 60 minutes must have a session index of two or less  
(5)
(9) Variable Constraints 

